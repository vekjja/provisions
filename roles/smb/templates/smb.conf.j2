[global]
   workgroup = WORKGROUP
   server string = %h server (Samba, Ubuntu)
   dns proxy = no
   log file = /var/log/samba/log.%m
   max log size = 1000
   syslog = 0
   panic action = /usr/share/samba/panic-action %d
   server role = standalone server
   passdb backend = tdbsam
   obey pam restrictions = yes
   unix password sync = yes
   passwd program = /usr/bin/passwd %u
   passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
   pam password change = yes
   map to guest = bad user
   usershare allow guests = yes

{% for share in smb_shares | default([]) %}
[{{ share.name }}]
   comment = {{ share.comment | default('') }}
   path = {{ share.path }}
   browseable = {{ share.browseable | default('yes') }}
   read only = {{ share.read_only | default('no') }}
   guest ok = {{ share.guest_ok | default('yes') }}
   create mask = {{ share.create_mask | default('0664') }}
   directory mask = {{ share.directory_mask | default('0775') }}
{% if share.valid_users is defined %}
   valid users = {{ share.valid_users }}
{% endif %}
{% if share.force_user is defined %}
   force user = {{ share.force_user }}
{% endif %}
{% if share.force_group is defined %}
   force group = {{ share.force_group }}
{% endif %}
{% if share.options is defined %}
{% for option in share.options %}
   {{ option }}
{% endfor %}
{% endif %}

{% endfor %}

